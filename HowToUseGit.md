# 쉽게 이해할 수 있는 git 사용 방식

## 리모트 브랜치 설정하기

git 은 크게 로컬 저장소와 원격 저장소가 존재합니다. 그래서 개인 프로젝트때도 로컬에서 형상 관리를 할 수도 있고
원격으로 팀원들과 협업하여 사용할 수 있는 것이죠.

### 로컬 저장소

로컬 저장소는 쉽게 생각하면 내 컴퓨터입니다. `git init` 명령어를 치면 `.git` 폴더가 만들어집니다. 이 폴더를 통해 코드가 저장됩니다.

git 은 Key-Value 스토리지로 모든 값들이 Hash 값을 통해 저장되는데 이는 더 자세하게 설명된 (전 직장동료의) 블로그가 있으니 이를 참고합시다.

https://johngrib.github.io/wiki/git-tutorial/
https://johngrib.github.io/wiki/git-study-with-action/

### 원격 저장소

쉽게 생각하면 github 입니다. gitlab 이 될수도 있구요. 다양한 원격 저장소들이 있습니다.
핵심은 로컬 저장소와 동일하게 저장이 된다는 겁니다.

한가지 특이한 점으로는 `push` 를 통해 코드를 저장하고 `pull` 을 통해 내려받을 수 있는 게 특이한 점이네요.

### 그렇다면 우리는 어떻게 사용해?

어렵지 않습니다.
원격 저장소는 이 레포(https://github.com/Rain3321/algorithm_study)를 `origin` 혹은 본인이 원하는 명칭으로 지정해주세요.

지정 방식 : ` git remote add <명칭> <레포URL> `


## 최신 코드 유지하기

* 먼저, 코드가 담겨있는 `main` 브랜치는 merge 가 완료된 코드들이 모여있는 장소입니다.
항상 최신으로 유지해주시는게 중요합니다.
  * 원격 저장소에서 코드를 가져오는 명령어로는 `pull` 과 `fetch`가 있습니다.
    * 이 둘의 가장 큰 차이로는 `pull` 의 경우 `fetch` + `merge` 의 종합 동작입니다.
        그래서 만약 같은 파일을 여러 사람이 수정할 경우 충돌이 날 가능성이 있습니다.
  * `merge`와 비슷한 병합 기능으로는 `rebase` 가 있습니다.
    * 가장 큰 차이로는 merge commit 이 생기냐 안생기냐의 차이입니다. 
      이름에서도 알 수 있듯 `merge` 의 경우 두 브랜치를 병합하는 방식으로 3-way 형태의 merge commit 이 생깁니다
      하지만 `rebase` 의 경우 한 브랜치를 베이스로 삼아 병합하는 브랜치를 그 위에 쌓는 형태로 merge commit 이 생겨나지 않습니다.
    * 더 자세하게 동작 원리가 궁금하다면 [해당 링크](https://git-scm.com/book/ko/v2/Git-%EB%B8%8C%EB%9E%9C%EC%B9%98-Rebase-%ED%95%98%EA%B8%B0) 를 참조바랍니다.
* 최신으로 유지하는 방법은 `git pull --rebase` 명령어를 통해 사용합니다. 
    우리가 사용할 방식도 이 방식을 통해 `main` 브랜치의 소스 코드를 최신으로 유지할겁니다.
    * `git pull --rebase origin main` 명령을 통해 코드를 내려받으세요.
  

## 코드 작성하기
그냥 말그대로 코드를 작성하면 됩니다.
이때, 1개의 브랜치에서는 1개의 문제만 풀어주세요.
또한, 커밋 메시지는 형식에 맞게 맞춰주시면 감사합니다.

예시: `[백준] 1000. A+B 문제풀이`

## 내가 작성한 코드 올리기

가장 먼저 새로운 코드를 작성하기 위해서는 새로운 브랜치에서 작업을 해야합니다. 
그렇다면 새로운 브랜치는 어떻게 만들까요? 
그리고 작업이 완료되면 어떻게 원격 저장소에 업로드를 할까요?

### 브랜치 만들기

최신 코드가 유지되고 있는 `main` 브랜치에서 브랜치를 생성합니다.
만드는 방법에는 여러가지가 있는데
1. `git brnach <새로운 브랜치명>`
2. `git checkout -b <새로운 브랜치명>`
3. `git switch -c <새로운 브랜치 명>` 

브랜치를 새로 만들고 난 이후에 해당 브랜치에서 자유롭게 코드 작업을 하면 됩니다.

#### 참고
* 1번의 경우 브랜치를 만들기만 하고 해당 브랜치로 이동하지는 않으니 2번 혹은 3번을 사용합시다.
* 브랜치 명의 경우 정해진 규칙으로 만듭시다.

### 코드 업로드

코드 업로드의 경우 `git push` 명령을 통해 진행합니다.
우리는 새로운 브랜치를 통해 문제를 푸니까 `git push origin <새로운 브랜치명>` 으로 push 를 하면
원격 저장소의 본인이 생성한 브랜치 명으로 코드가 업로드 됩니다.

하지만 우리는 `main` 브랜치에 반영을 해야합니다. 어떻게 해야할까요? 바로 `Pull Request` 기능을 사용합니다.
`push`를 하게 되면 일반적으로 터미널에 PR 을 위한 url 이 나오기도 하고 해당 원격 저장소에 접근해도 초록색 버튼이 반짝반짝 빛나며 
PR을 하라고 저희를 반겨줍니다.

PR의 템플릿은 어렵지 않은데, 그냥 내용에 코드를 위한 설명을 쓰면 됩니다. 코드 리뷰어를 위해 최대한 자세하게 서술해줄수록
리뷰어에게 도움이 됩니다.

PR은 최소 1개의 approve 가 있어야 main 브랜치에 병합이 가능합니다. 

#### 리뷰는 어떻게 하나요?
다른 사람이 올린 PR에 들어가보면 `Files changed` 탭이 있습니다. 해당 탭에서 리뷰를 진행할 수 있습니다.

* 코드 라인별로 궁금증이 있다면 + 기호 앞에서 마우스로 드래그를 하면 해당 영역에 대한 리뷰를 달 수 있습니다.
* 오른쪽 위에 `Review changes` 버튼을 누르면 코멘트와 함께 승인을 할 수 있습니다.

### 리뷰가 완료된 이후에

리뷰가 완료된 이후에는 자유롭게 merge 버튼을 통해 병합하면 됩니다.
**이때, 꼭 Squash merge 를 사용해주세요.**
merge 버튼 옆에 화살표를 누르면 선택할 수 있습니다.

